<HTML>
<head>
	<title>JUpload - File Upload Applet (advanced js demo)</title>
</head>
<body>
<script language="javascript" src="common.js"> </script>




<SCRIPT LANGUAGE="JavaScript">
	//All managed parameters are below, with there default value :
	postURL = "http://localhost:8080/jupload/pages/parseRequest.jsp";
	urlToSendErrorTo = "mailto:toto@yahoo.com"; //Careful: log info will be truncated, if sent to a mailto: link.
	uploadPolicy = "";
	filenameEncoding = "";
	lang = "";
	lookAndFeel = "";
	nbFilesPerRequest = "";
	maxPicHeight = "";
	maxPicWidth = "";
	debugLevel = "";
	serverProtocol = "";
	stringUploadSuccess = "";
	
	//Some parameters can only be choosen from an existing list:
	uploadPolicyList = ["", "DefaultUploadPolicy", "FileByFileUploadPolicy", "PictureUploadPolicy", "CoppermineUploadPolicy"];
	//eo: esperanto
	langList = ["", "de", "en", "eo", "es", "fr", "nl", "us"];
	serverProtocolList = ["", "HTTP/0.9", "HTTP/1.0", "HTTP/1.1"];

	function writeInputText (name, value) {
		document.write('	<tr><td align="center">');
		document.write(name);
		document.write('</td><td><INPUT TYPE="TEXT" NAME="');
		document.write(name);
		document.write('"');
		if (value != "") {
			document.write(' VALUE="');
			document.write(value);
			document.write('" ');
		}
		document.writeln(	'></td></tr>');
	}//writeInputText

	function writeInputSelect (name, value, list) {
		document.write('	<tr><td align="center">');
		document.write(name);
		document.write('</td><td><SELECT NAME="');
		document.write(name);
		document.writeln('">');

		for (i=0; i<list.length; i += 1) {
			document.write('<OPTION');
			if (value == list[i]) {
				document.write(' SELECTED');
			}
			document.write('>');
			document.writeln(list[i]);
		}
		document.writeln(	'</SELECT></td></tr>');
	}//writeInputText

	function writeParam (param, value) {
		if (value != "") {
			document.write('   <param name="');
			document.write(param);
			document.write('" VALUE="');
			document.write(value);
			document.writeln('" >');
		}
	}//writeParam

	
	//First: get possible URL parameters.
	reQuery = new RegExp ("[\?](.*)&?");
	reQuery.exec(location.href);
	query = RegExp.$1;
	
	//Then, get each parameter
	reParam = /([^&]*)=([^&]*)&?/g;
	array = reParam.exec(query);
	while (array != null) {
		val = unescape(array[2]);
		switch (array[1]) {
		case "debugLevel":
			debugLevel = val;
			break;
		case "filenameEncoding":
			filenameEncoding = val;
			break;
		case "lang":
			lang = val;
			break;
		case "lookAndFeel":
			lookAndFeel = val;
			break;
		case "maxPicHeight":
			maxPicHeight = val;
			break;
		case "maxPicWidth":
			maxPicWidth = val;
			break;
		case "nbFilesPerRequest":
			nbFilesPerRequest = val;
			break;
		case "postURL":
			postURL = val;
			break;
		case "serverProtocol":
			serverProtocol = val;
			break;
		case "stringUploadSuccess":
			stringUploadSuccess = val;
			break;
		case "uploadPolicy":
			uploadPolicy = val;
			break;
		case "urlToSendErrorTo":
			urlToSendErrorTo = val;
			break;
		default:
			alert("Unknown parameter: " + array[1]);
		}
		array = reParam.exec(query);
	}//while


	//First the form, with default values given by the query parameters.
	document.writeln('Enter Jupload parameters');
	document.writeln('<FORM>');
	document.writeln('<TABLE>');
	writeInputSelect("uploadPolicy", uploadPolicy, uploadPolicyList);
	writeInputText("postURL", postURL);
	writeInputText("urlToSendErrorTo", urlToSendErrorTo);
	writeInputSelect("lang", lang, langList);
	writeInputText("lookAndFeel", lookAndFeel);
	writeInputSelect("serverProtocol", serverProtocol, serverProtocolList);
	writeInputText("stringUploadSuccess", stringUploadSuccess);
	writeInputText("debugLevel", debugLevel);
	writeInputText("filenameEncoding", filenameEncoding);
	writeInputText("nbFilesPerRequest", nbFilesPerRequest);
	writeInputText("maxPicHeight", maxPicHeight);
	writeInputText("maxPicWidth", maxPicWidth);
	document.writeln('</TABLE>');
	document.writeln('<input type="submit" value="Test with these parameters (don\'t forget to click on this button when parameters changed)">');
	document.writeln('</FORM>');
	document.writeln('');

	//Let's write one APPLET tag for the selected language	
	document.writeln('<APPLET ');
	document.writeln('	CODE    = "wjhk.jupload2.JUploadApplet" ');
	document.writeln('	ARCHIVE = "wjhk.jupload.jar" ');
	document.writeln('	WIDTH   = "640" ');
	document.writeln('	HEIGHT  = "300"');
	document.writeln('	MAYSCRIPT >');
	writeParam("postURL", postURL);
	writeParam("uploadPolicy", uploadPolicy);
	writeParam("debugLevel", debugLevel);
	writeParam("filenameEncoding", filenameEncoding);
	writeParam("lang", lang);
	writeParam("lookAndFeel", lookAndFeel);
	writeParam("nbFilesPerRequest", nbFilesPerRequest);
	writeParam("maxPicHeight", maxPicHeight);
	writeParam("maxPicWidth", maxPicWidth);
	writeParam("urlToSendErrorTo", urlToSendErrorTo);
	writeParam("stringUploadSuccess", stringUploadSuccess);
	document.writeln('Java 1.4 or higher plugin required.');
	document.writeln('</APPLET>');
</SCRIPT>


<script language="javascript"> footer(); </script>

</center>

 </body>
</HTML>
